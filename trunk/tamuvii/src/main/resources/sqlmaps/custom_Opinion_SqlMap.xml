<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="custom_opinion" >

  <resultMap id="detailedOpinionMap" class="com.tamuvii.pojo.DetailedOpinion" >
    <result column="opinion" jdbcType="INTEGER" property="opinion" />
    <result column="review" jdbcType="INTEGER" property="review" />
    <result column="username" jdbcType="VARCHAR" property="username" />
	<result column="image" property="image" jdbcType="VARCHAR" />    
    <result column="opinion_text" jdbcType="VARCHAR" property="opiniontext" />
    <result column="date_inserted" jdbcType="TIMESTAMP" property="dateinserted" />
  </resultMap>
  
  <select id="getDetailedOpinionsByReview" resultMap="detailedOpinionMap" parameterClass="java.lang.Integer">
  		select				o.opinion,
							o.review,
							o.username,
							o.opinion_text,
							o.date_inserted,
							au.image

		from				opinion o inner join app_user au
							on o.username = au.username

		where				o.review = #review#
  </select>
  

</sqlMap>